<?php

$golfCourses = [
    "Carnoustie Golf Links" => [
        "bookingLink" => "https://booking.carnoustie.com/",
        "onlineBooking" => "Yes",
        "greenFee" => "360",
        "image" => "images/carnoustie/general/DJI_0678-Enhanced-NR.jpg",
    ],
    "Muirfield" => [
        "bookingLink" => "https://www.muirfield.org.uk/visitors-new/",
        "onlineBooking" => "No",
        "greenFee" => "395",
        "image" => "",
    ],
    "Royal Dornoch" => [
        "bookingLink" => "https://booking.royaldornoch.com/",
        "onlineBooking" => "Yes",
        "greenFee" => "360",
        "image" => "",
    ],
    "Turnberry" => [
        "bookingLink" =>
            "https://turnberry.booktrump.com/tee-times?propertyid=49",
        "onlineBooking" => "Yes",
        "greenFee" => "545",
        "image" => "",
    ],
    "Kingsbarns" => [
        "bookingLink" => "https://www.kingsbarns.com/reservations",
        "onlineBooking" => "No",
        "greenFee" => "399",
        "image" => "",
    ],
    "North Berwick" => [
        "bookingLink" =>
            "https://www.northberwickgolfclub.com/tee_booking_request_form",
        "onlineBooking" => "No",
        "greenFee" => "320",
        "image" => "",
    ],
    "Cabot Highlands" => [
        "bookingLink" => "https://cabothighlands.com/make-a-reservation",
        "onlineBooking" => "No",
        "greenFee" => "385",
        "image" => "",
    ],
    "crudenbay" => [
        "bookingLink" => "https://crudenbaygolfclub.co.uk/visitors/green-fees/",
        "onlineBooking" => "No",
        "greenFee" => "205",
        "image" => "",
    ],
    "Trump Aberdeen" => [
        "bookingLink" => "https://www.trumpgolfscotland.com/golf/tee-times",
        "onlineBooking" => "Yes",
        "greenFee" => "560",
        "image" => "",
    ],
    "Royal Aberdeen" => [
        "bookingLink" =>
            "https://www.royalaberdeengolf.com/visitor-information-and-green-fees",
        "onlineBooking" => "No",
        "greenFee" => "245",
        "image" => "",
    ],
    "Prestwick" => [
        "bookingLink" => "https://visitors.brsgolf.com/prestwick#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "340",
        "image" => "",
    ],
    "Royal Troon" => [
        "bookingLink" =>
            "https://www.brsgolf.com/royaltroon/visitor_home.php?framed=false",
        "onlineBooking" => "Yes",
        "greenFee" => "395",
        "image" => "",
    ],
    "Machrihanish" => [
        "bookingLink" =>
            "https://machrihanish.hub.clubv1.com/Visitors/TeeSheet?date=2026-01-04",
        "onlineBooking" => "Yes",
        "greenFee" => "155",
        "image" => "",
    ],
    "Gleneagles" => [
        "bookingLink" =>
            "https://pursuits.gleneagles.com/reservations/template/21459/?course=The+King%27s",
        "onlineBooking" => "Yes",
        "greenFee" => "375",
        "image" => "",
    ],
    "Western Gailes" => [
        "bookingLink" => "https://westerngailes.com/book-a-tee-time/",
        "onlineBooking" => "No",
        "greenFee" => "335",
        "image" => "",
    ],
    "Dumbarnie" => [
        "bookingLink" => "https://visitors.brsgolf.com/dumbarnie#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "350",
        "image" => "",
    ],
    "nairngc" => [
        "bookingLink" => "https://visitors.brsgolf.com/nairngc#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "350",
        "image" => "",
    ],
    "The Machrie" => [
        "bookingLink" =>
            "https://book.rguest.eu/onecart/golf/courses/10278/TheMachrie",
        "onlineBooking" => "Yes",
        "greenFee" => "185",
        "image" => "",
    ],
    "Gullane" => [
        "bookingLink" => "https://visitors.brsgolf.com/gullane",
        "onlineBooking" => "Yes",
        "greenFee" => "325",
        "image" => "",
    ],
    "machrihanishdunes" => [
        "bookingLink" => "https://visitors.brsgolf.com/machrihanishdunes",
        "onlineBooking" => "Yes",
        "greenFee" => "125",
        "image" => "",
    ],
    "Brora" => [
        "bookingLink" => "https://www.broragolfclub.co.uk/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "180",
        "image" => "",
    ],
    "Elie" => [
        "bookingLink" => "https://elie.intelligentgolf.co.uk/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "160",
        "image" => "",
    ],
    "Murcar" => [
        "bookingLink" => "https://visitors.brsgolf.com/murcarlinks",
        "onlineBooking" => "Yes",
        "greenFee" => "195",
        "image" => "",
    ],
    "panmure" => [
        "bookingLink" => "https://visitors.brsgolf.com/panmure#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "195",
        "image" => "",
    ],
    "Lundin Links" => [
        "bookingLink" => "https://visitors.brsgolf.com/lundingc#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "175",
        "image" => "",
    ],
    "Moray" => [
        "bookingLink" => "https://www.brsgolf.com/moray/visitor_home.php",
        "onlineBooking" => "Yes",
        "greenFee" => "150",
        "image" => "",
    ],
    "Dundonald" => [
        "bookingLink" => "https://visitors.brsgolf.com/dundonald#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "190",
        "image" => "",
    ],
    "Blairgowrie" => [
        "bookingLink" =>
            "https://blairgowrie.intelligentgolf.co.uk/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "155",
        "image" => "",
    ],
    "Dunbar" => [
        "bookingLink" => "https://www.dunbargolfclub.com/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "225",
        "image" => "",
    ],
    "Boat of Garten" => [
        "bookingLink" =>
            "https://boatofgarten.intelligentgolf.co.uk/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "115",
        "image" => "",
    ],
    "Southerness" => [
        "bookingLink" => "https://visitors.brsgolf.com/southerness#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "115",
        "image" => "",
    ],
    "Luffness" => [
        "bookingLink" => "https://www.luffnessnew.com/visitor-booking/",
        "onlineBooking" => "No",
        "greenFee" => "210",
        "image" => "",
    ],
    "Fraserburgh" => [
        "bookingLink" =>
            "https://fraserburghgolfclub.org/Teebooking/SearchClubDay.aspx",
        "onlineBooking" => "Yes",
        "greenFee" => "150",
        "image" => "",
    ],
    "Glasgow Gailes" => [
        "bookingLink" => "https://www.brsgolf.com/glasgow/visitor_home.php",
        "onlineBooking" => "Yes",
        "greenFee" => "180",
        "image" => "",
    ],
    "Spey Valley" => [
        "bookingLink" =>
            "https://macdonald-hotels-spey-valley-championship.book.teeitup.com/",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "montrosegolflinks" => [
        "bookingLink" =>
            "https://visitors.brsgolf.com/montrosegolflinks#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Askernish" => [
        "bookingLink" =>
            "https://www.askernishgolfclub.com/Teebooking/SearchClubDay.aspx",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Scotscraig" => [
        "bookingLink" => "https://www.scotscraiggolfclub.com/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Leven" => [
        "bookingLink" => "https://visitors.brsgolf.com/levenlinks",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Irvine" => [
        "bookingLink" => "https://visitors.brsgolf.com/irvine#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Ladybank" => [
        "bookingLink" => "https://visitors.brsgolf.com/ladybank#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Prestwick St Nicholas" => [
        "bookingLink" => "https://visitors.brsgolf.com/prestwickstnicholas",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "West Kilbride" => [
        "bookingLink" => "https://visitors.brsgolf.com/westkilbride#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Longniddry" => [
        "bookingLink" => "https://www.longniddrygolfclub.co.uk/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "golspie" => [
        "bookingLink" => "https://visitors.brsgolf.com/golspie#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Kilspindie" => [
        "bookingLink" => "https://www.kilspindiegolfclub.co.uk/visitorbooking/",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "monifieth" => [
        "bookingLink" => "https://visitors.brsgolf.com/monifieth#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Crail" => [
        "bookingLink" =>
            "https://eu.cps.golf/CrailNEWv3/(S(0stz324rkgdoc0crajs2jqhy))/Home/nIndex?CourseId=19,18",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Nairn Dunbar" => [
        "bookingLink" =>
            "https://visitors.brsgolf.com/nairndunbargolf#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Peterhead" => [
        "bookingLink" => "https://visitors.brsgolf.com/peterhead",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "downfield" => [
        "bookingLink" => "https://downfield.hub.clubv1.com/Visitors/TeeSheet",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Lanark" => [
        "bookingLink" => "https://visitors.brsgolf.com/lanark",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Fortrose and Rosemarkie" => [
        "bookingLink" => "https://www.brsgolf.com/fortrose/visitor_home.php",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Pitlochry" => [
        "bookingLink" => "https://visitors.brsgolf.com/pitlochry",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Kilmarnock Barassie" => [
        "bookingLink" => "https://www.kbgc.co.uk/visitor-booking-form",
        "onlineBooking" => "No",
        "greenFee" => "330",
        "image" => "",
    ],
    "East Renfrewshire" => [
        "bookingLink" =>
            "https://visitors.brsgolf.com/eastrenfrewshire#/course/1",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Shiskine" => [
        "bookingLink" => "https://visitors.brsgolf.com/shiskine",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
    "Tain" => [
        "bookingLink" =>
            "https://tain.hub.clubv1.com/Visitors/TeeSheet?date=2026-01-04",
        "onlineBooking" => "Yes",
        "greenFee" => "330",
        "image" => "",
    ],
];

if (
    $_GET["club"] == "tain" ||
    $_GET["club"] == "downfield" ||
    $_GET["club"] == "machrihanish"
) {
    require_once "clubV1Call.php";
    require_once "clubV1Processor.php";

    $ClubV1Call = new ClubV1Call();
    $response = $ClubV1Call->getTeeTimesForDay($_GET["date"], $_GET["club"]);

    $ClubV1Processor = new ClubV1Processor();
    echo $ClubV1Processor->processTeeTime(
        $response,
        $_GET["date"],
        $_GET["club"],
    );
} else {
    require_once "brsCall.php";
    require_once "brsProcessor.php";

    $BRSCall = new BRSCall();
    $teeTimes = $BRSCall->getTeeTimesForDay($_GET["date"], $_GET["club"]);

    $BRSProcessor = new BRSProcessor();
    $availability = $BRSProcessor->processTeeTime(
        $_GET["club"],
        $teeTimes,
        $golfCourses[$_GET["club"]],
    );

    echo $availability;

    $opens = $BRSCall->getOpens($_GET["club"]);
    [
        $openInfo,
        $openId,
        $greenFee,
        $availableDate,
    ] = $BRSProcessor->checkForOpenOnDay($opens, $_GET["date"]);

    echo $openInfo;

    if ($openId) {
        $openField = $BRSCall->checkOpenAvailability($_GET["club"], $openId);
        echo $BRSProcessor->processOpenCompetition($openField, $availableDate);
    }
}
